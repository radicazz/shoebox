#!/usr/bin/env bash
set -euo pipefail

SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
# shellcheck source=./_nvm-load.sh
source "$SCRIPT_DIR/_nvm-load.sh"

echo "‚öôÔ∏è  Setting up shoe-box..."
echo ""

# Check Node.js
echo "1Ô∏è‚É£  Checking Node.js..."
if ! command -v node &> /dev/null; then
  echo "  ‚úó Node.js not found!"
  echo "  üí° Install Node.js 18+ from https://nodejs.org/"
  exit 1
fi

NODE_VERSION=$(node --version)
echo "  ‚úì Found Node.js $NODE_VERSION"

# Install dependencies
echo ""
echo "2Ô∏è‚É£  Installing dependencies..."
npm install

# Build project
echo ""
echo "3Ô∏è‚É£  Building project..."
npm run build

echo ""
echo "‚úÖ Setup complete!"
echo ""
echo "Next steps:"
echo "  ‚Ä¢ Run './scripts/dev' to start development server"
echo "  ‚Ä¢ Run './scripts/doctor' to verify environment"
echo "  ‚Ä¢ Edit public/gallery.json to customize profile"
